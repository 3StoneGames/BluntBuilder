<!DOCTYPE HTML>
<html>
<head>
	<title>Blunt Builder</title>
    <meta name="viewport" content="width=device-width, height=device-height, user-scalable=no, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
	<style>
		body {
			margin: 0;
			padding: 0;
			background-color: #000000;
		}
	</style>
	<script src="pixi.js"></script>
    <script src="helper.js"></script>
    <script src="menu.js"></script>
    <script src="log.js"></script>
    <script src="logManager.js"></script>
    <script src="gameManager.js"></script>
    <script src="gameMenu.js"></script>
    
   
</head>
<body>
<script id="u">
    //helper methods for screen size
    var maxWidth = window.innerWidth;    
    var maxHeight = window.innerHeight;
    window.addEventListener('orientationchange', handleOrientation, false);
    function handleOrientation() {
        if (orientation == 0) {
            maxWidth = window.innerWidth;    
    maxHeight = window.innerHeight;
        } else {
             maxWidth = window.innerWidth;    
     maxHeight = window.innerHeight;
        }
    }
     
     
    var stage = new PIXI.Stage(0x004400, true);

    var gameState = 0;
    //gamestate 
    //0 = menu
    //1 = game
    //2 = highscore

    var renderer = PIXI.autoDetectRenderer(maxWidth, maxHeight);

    document.body.appendChild(renderer.view);

    requestAnimFrame(animate);

    var gameContext = this;
    
    var gameManager = new gameManager();

    

    var gameMenu = new gameMenu();
    
    

    function animate() {

        requestAnimFrame(animate);
        
        if(gameState == 0)
        {
            gameManager.clear();
            gameMenu.initialize();
        }

        if(gameState == 1)
        {
            if(gameManager.isInitialized)
            {
                //hier wäre eig. die update funktion
                var processedTime = Date.now() - gameManager.startTime ;
                gameManager.timeLeft = gameManager.maxTime - processedTime;
                gameManager.timeLeftText.setText(gameManager.timeLeft.toString().substring(0,2));
                if(gameManager.timeLeft < 0)
                {
                    gameManager.end();
                    gameState = 3;
                }
            }
            else
            {
                gameMenu.clear();
                gameManager.initialize();
            }
            
        }

        if(gameState == 3)
        {
            if(gameManager.finishedRound)
            {
                
            }
        }





        

        renderer.render(stage)
    }
</script>
</body>
</html>
